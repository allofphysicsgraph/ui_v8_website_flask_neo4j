{% extends "_base.html" %}
{% block content %}

<P>
  Return to <a href="{{ url_for('main') }}?referrer=expession_edit">main page</a>
</P>

{{ expression_dict }}

<fieldset>
  <legend>
    <H2>Symbols in Expression</h2>
  </legend>
  TODO: list symbols  used in expression 
  <P>{{ list_of_symbol_IDs_used_in_this_expression }}
</fieldset>

<fieldset>
  <legend>
    <H2>Add Symbol used in Expression</h2>
  </legend>
  <form method="post" action="" onsubmit="return checkForm(this);">
    {{ form_no_options.csrf_token }}
    <P><!--symbol count: { { list_of_symbol_IDs|length } }-->
    <select name="symbol_select_id_to_add" class="selectpicker form-control" id="symbol_select">
      {% for symbol_id in list_of_symbol_IDs %}
      <option value="{{ symbol_id }}">{{ symbol_id }}, {{ dict_of_symbol_dicts[symbol_id]['latex'] }} </option>
      {% endfor %}
    </select>
    <input type="submit" value="add symbol to expression">
  </form>
</fieldset>

<fieldset>
  <legend>
    <H2>Remove Symbol used in Expression</h2>
  </legend>
  <form method="post" action="" onsubmit="return checkForm(this);">
    {{ form_no_options.csrf_token }}
TODO: this list should be the symbols currently used by the expression, not all the symbols
    <P><!--symbol count: { { list_of_symbol_IDs|length } }-->
    <select name="symbol_select_id_to_remove" class="selectpicker form-control" id="symbol_select">
      {% for symbol_id in list_of_symbol_IDs %}
      <option value="{{ symbol_id }}">{{ symbol_id }}, {{ dict_of_symbol_dicts[symbol_id]['latex'] }} </option>
      {% endfor %}
    </select>
    <input type="submit" value="remove symbol from expression">
  </form>
</fieldset>



<fieldset>
  <legend>
    <H2>operation in Expression</h2>
  </legend>
  TODO: list operations used in expression 
  <P>{{ list_of_operation_IDs_used_in_this_expression }}
</fieldset>


<fieldset>
  <legend>
    <H2>Add operation used in Expression</h2>
  </legend>
  <form method="post" action="" onsubmit="return checkForm(this);">
    {{ form_no_options.csrf_token }}
    <P><!-- operation count: { { list_of_operation_IDs|length } } -->
    <select name="operation_select_id_to_add" class="selectpicker form-control" id="operation_select">
      {% for operation_id in list_of_operation_IDs %}
      <option value="{{ operation_id }}">{{ operation_id }}, {{ dict_of_operation_dicts[operation_id]['latex'] }} </option>
      {% endfor %}
    </select>

  </form>
</fieldset>

<fieldset>
  <legend>
    <H2>Remove operation used in Expression</h2>
  </legend>
  <form method="post" action="" onsubmit="return checkForm(this);">
    {{ form_no_options.csrf_token }}
TODO: this list should be the operations currently used by the expression, not all the operations
    <P><!-- operation count: { { list_of_operation_IDs|length } } -->
    <select name="operation_select_id_to_remove" class="selectpicker form-control" id="operation_select">
      {% for operation_id in list_of_operation_IDs %}
      <option value="{{ operation_id }}">{{ operation_id }}, {{ dict_of_operation_dicts[operation_id]['latex'] }} </option>
      {% endfor %}
    </select>

  </form>
</fieldset>


  <fieldset>
    <legend>
      <H2>Edit Expression and metadata</h2>
    </legend>

  <form method="post" action="" onsubmit="return checkForm(this);">
    {{ form_new_expression.csrf_token }}
    <P>
      {{ form_new_expression.expression_latex.label}} (<B>required</B>): {{ form_new_expression.expression_latex(size=50, maxlength=1000, value=expression_dict['latex']) }} <BR/>
      &nbsp;<BR/>
      {{form_new_expression.expression_name.label }} (optional): {{ form_new_expression.expression_name(size=50, maxlength=1000, value=expression_dict['name']) }}<BR/>
      &nbsp;<BR/>
      {{form_new_expression.expression_description.label }} (optional): {{ form_new_expression.expression_description(size=50, maxlength=1000, value=expression_dict['description']) }}<BR/>
      &nbsp;<BR/>
      <input type="submit" value="Edit expression">
    </P>
  </form>
</fieldset>


{% endblock %}
