{% extends "_base.html" %}
{% block content %}

<P>
  Return to <a href="{{ url_for('main') }}?referrer=expession_edit">main page</a>
</P>

<P>
  Return to <a href="{{ url_for('to_list_expressions') }}?referrer=expession_edit">list of expressions</a>
</P>

<P>Being edited: {{ expression_dict }}

<fieldset>
  <legend>
    <H2>Symbols in Expression</h2>
  </legend>

<table border="1" id="symbol_table">
  <tr>
    <th>ID</th>
    <th>latex</th>
    <th>name</th>
    <th>description</th>
    <th>reference</th>
    <th>dimension: time</th>
    <th>dimension: length</th>
    <th>dimension: mass</th>
    <th>dimension: electric charge</th>
    <th>dimension: luminous intensity</th>
    <th>dimension: amount of substance</th>
    <th>dimension: temperature</th>
    <th>scope</th>
    <th>domain</th>
  </tr>
  {% for symbol_id, symbol_dict in dict_of_symbol_dicts_in_expression.items() %}
  <tr>
    <td>
      <a href="{{ url_for( 'to_edit_symbol', symbol_id=symbol_id ) }}">
          {{ symbol_id }}
      </a>
    </td>
    <td>{{ symbol_dict['latex']}}</td>
    <td>{{ symbol_dict['name_latex'] }}</td>
    <td>{{ symbol_dict['description_latex'] }}</td>
    <td>{{ symbol_dict['symbol_reference'] }}</td>
    <td>{{ symbol_dict['dimension_time'] }}</td>
    <td>{{ symbol_dict['dimension_length'] }}</td>
    <td>{{ symbol_dict['dimension_mass'] }}</td>
    <td>{{ symbol_dict['dimension_electric_charge'] }}</td>
    <td>{{ symbol_dict['dimension_luminous_intensity'] }}</td>
    <td>{{ symbol_dict['dimension_amount_of_substance'] }}</td>
    <td>{{ symbol_dict['dimension_temperature'] }}</td>
    <td>{{ symbol_dict['symbol_scope'] }}</td>
    <td>{{ symbol_dict['symbol_domain'] }}</td>
  </tr>
  {% endfor %}
</table>

<fieldset>
  <legend>
    <H2>Add Symbol used in Expression</h2>
  </legend>
  <form method="post" action="" onsubmit="return checkForm(this);">
    {{ form_no_options.csrf_token }}
    <P><!--symbol count: { { list_of_symbol_IDs|length } }-->
    <select name="symbol_select_id_to_add" class="selectpicker form-control" id="symbol_select">
      {% for symbol_id in dict_of_symbol_dicts_not_in_expression.keys() %}
      <option value="{{ symbol_id }}">{{ symbol_id }}, {{ dict_of_all_symbol_dicts[symbol_id]['latex'] }} </option>
      {% endfor %}
    </select>
    <input type="submit" value="add symbol to expression">
  </form>
</fieldset>

<fieldset>
  <legend>
    <H2>Remove Symbol used in Expression</h2>
  </legend>
  <form method="post" action="" onsubmit="return checkForm(this);">
    {{ form_no_options.csrf_token }}
    <P><!--symbol count: { { list_of_symbol_IDs|length } }-->
    <select name="symbol_select_id_to_remove" class="selectpicker form-control" id="symbol_select">
      {% for symbol_id in dict_of_symbol_dicts_in_expression.keys() %}
      <option value="{{ symbol_id }}">{{ symbol_id }}, {{ dict_of_all_symbol_dicts[symbol_id]['latex'] }} </option>
      {% endfor %}
    </select>
    <input type="submit" value="remove symbol from expression">
  </form>
</fieldset>

</fieldset>


<fieldset>
  <legend>
    <H2>Operations in Expression</h2>
  </legend>

  <P>{% for operation_id, operation_dict in dict_of_operation_dicts_in_expression.items() %}
    <UL>
      <LI>{{ operation_dict }}</LI>
    </UL>
     {% endfor %}


<table border="1" id="operation_table">
  <tr>
    <th>ID</th>
    <th>latex</th>
    <th>name</th>
    <th>number of arguments</th>
    <th>description</th>
  </tr>
  {% for operation_id, operation_dict in dict_of_operation_dicts_in_expression.items() %}
  <tr>
    <td><a href="{{ url_for('to_edit_operation', operation_id=operation_id) }}">{{ operation_id }}</a></td> <!-- ID -->
    <td>{{ operation_dict['latex'] }}</td> <!-- latex -->
    <td>{{ operation_dict['name_latex'] }}</td> <!-- name -->
    <td>{{ operation_dict['number_of_arguments'] }}</td>
    <td>{{ operation_dict['description_latex'] }}</td>
  </tr>
  {% endfor %}
</table>

<fieldset>
  <legend>
    <H2>Add operation used in Expression</h2>
  </legend>
  <form method="post" action="" onsubmit="return checkForm(this);">
    {{ form_no_options.csrf_token }}
    <P><!-- operation count: { { list_of_operation_IDs|length } } -->
    <select name="operation_select_id_to_add" class="selectpicker form-control" id="operation_select">
      {% for operation_id, operation_dict in dict_of_operation_dicts_not_in_expression.items() %}
      <option value="{{ operation_id }}">{{ operation_id }}, {{ operation_dict['latex'] }} </option>
      {% endfor %}
    </select>
    <input type="submit" value="add operation to expression">
  </form>
</fieldset>

<fieldset>
  <legend>
    <H2>Remove operation used in Expression</h2>
  </legend>
  <form method="post" action="" onsubmit="return checkForm(this);">
    {{ form_no_options.csrf_token }}
    <P><!-- operation count: { { list_of_operation_IDs|length } } -->
    <select name="operation_select_id_to_remove" class="selectpicker form-control" id="operation_select">
      {% for operation_id, operation_dict in dict_of_operation_dicts_in_expression.items() %}
      <option value="{{ operation_id }}">{{ operation_id }}, {{ operation_dict['latex'] }} </option>
      {% endfor %}
    </select>
    <input type="submit" value="remove operation from expression">
  </form>
</fieldset>
</fieldset>

  <fieldset>
    <legend>
      <H2>Edit Expression and metadata</h2>
    </legend>

  <form method="post" action="" onsubmit="return checkForm(this);">
    {{ form_new_expression.csrf_token }}
    <P>
      {{ form_new_expression.expression_latex.label}} (<B>required</B>): {{ form_new_expression.expression_latex(size=50, maxlength=1000, value=expression_dict['latex']) }} <BR/>
      &nbsp;<BR/>
      {{form_new_expression.expression_name.label }} (optional): {{ form_new_expression.expression_name(size=50, maxlength=1000, value=expression_dict['name']) }}<BR/>
      &nbsp;<BR/>
      {{form_new_expression.expression_description.label }} (optional): {{ form_new_expression.expression_description(size=50, maxlength=1000, value=expression_dict['description']) }}<BR/>
      &nbsp;<BR/>
      <input type="submit" value="Edit expression">
    </P>
  </form>
</fieldset>


{% endblock %}
