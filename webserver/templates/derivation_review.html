{% extends "_base.html" %}
{% block content %}

<P>
  Return to <a href="{{ url_for('main') }}?referrer=review_derivation">main page</a>
</P>

<H2>Review {{ derivation_dict['name_latex'] }}</H2>

<P> Derivation dictionary: {{ derivation_dict }}

<P> all_steps: {{ all_steps }}



<table border="1" id="derivation_steps_table">
  <tr>
    <th>step ID</th>
    <th>inference rule</th>
    <th>input</th>
    <th>feed</th>
    <th>output</th>
  </tr>
  {% for step_id, step_dict in all_steps.items() %}
  <tr>
    <td>
      <a href="{{ url_for( 'to_edit_step', step_id=step_id ) }}">
        {{ step_id }}
      </a>
    </td>
    <td>{{ step_dict['name_latex'] }}</td>
    <td>{{ step_dict['list of input IDs'] }}</td>
    <td>{{ step_dict['list of feed IDs'] }}</td>
    <td>{{ step_dict['list of output IDs'] }}</td>
  </tr>
  {% endfor %}
</table>


<!--
<ul>
{ % for this_step in list_of_steps % }
<li>{ { this_step } }</li>
{ % endfor % }
</ul>
-->
<P>TODO: display graph of derivation (e.g., graphviz)

<P>TODO: display tex, PDF

<fieldset>
<legend>
  <H2>Edit Derivation</h2>
</legend>

<UL>
<LI> <a href="{{ url_for('to_add_step_select_inference_rule', derivation_id=derivation_dict['id']) }}">add step to this derivation</a></LI>
<LI> <a href="{{ url_for('to_select_step', derivation_id=derivation_dict['id']) }}">delete step from this derivation</a></LI>
<LI> <a href="{{ url_for('to_select_step', derivation_id=derivation_dict['id']) }}">edit step in this derivation</a></LI>
<LI> <a href="{{ url_for('to_edit_derivation_metadata', derivation_id=derivation_dict['id']) }}">rename this derivation</a></LI>
<LI> <a href="{{ url_for('to_edit_derivation_metadata', derivation_id=derivation_dict['id']) }}">edit abstract for this derivation</a></LI>
  </UL>

</fieldset>

{% endblock %}
